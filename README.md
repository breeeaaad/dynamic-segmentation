<div align="center">
    <h1>Динамическое сегментирование пользователей</h1>
</div>

---

## Используемые библиотеки и фреймворки:
- `gin`
- `pgx`
- `godotenv`

---

## Схема БД
![Схема БД](./docs/schema.png)

---

## Запуск
Перед запуском нужно прописать переменные в файле envs.sh.
Чтобы запустить приложение, необходимо выполнить следующую команду в корне репозитория:

```
make run
```

Остановить можно командой:

```
make stop
```

---

## Запросы:
Все полные примеры запросов будут представлены в postman
## Создание пользователя
![Создание пользователя](./docs/newuser.png)
## Создание сегмента
![Создание сегмента](./docs/create.png)
## Удаление сегмента
![Удаление сегмента](./docs/delete.png)
## Добавление или удаление пользователя из сегмента
![Добавление или удаление пользователя из сегмента](./docs/editing.png)
## Получение информации о пользователе
![Получение информации о пользователе](./docs/info.png)
## Скачивание отчета
![Скачивание отчета](./docs/download.png)

---

## Принятые решения:

## Указание процентов 
Указание процента автоматического попадания в сегмент пользователей при создании его не обязательно. 

## Автоматическое удаление при истечении TTL
Можно указать время в днях когда сегмент автоматически удалиться из таблицы бд. Для ее реализации запускается фоновая функция, которая удаляет при запуске и каждые 24 часа все строки с истекшим TTL. 